<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stylish Antelope</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Festive:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --color-bg-primary: #f5f4ed;
            --color-bg-secondary: #e7e5db;
            --color-bg-hover: #faf9f5;
            --color-text-primary: #474744;
            --color-text-secondary: #3d3d3a;
            --color-text-placeholder: #858585;
            --color-border: #6b7280;
            --shadow-modal: 0 -4px 6px -1px rgba(195, 195, 196, 0.3), 
                           0 -10px 15px -3px rgba(195, 195, 196, 0.2);
            --transition-default: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-modal: transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rubik', festive, sans-serif;
            background-color: var(--color-bg-primary);
            color: var(--color-text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        body.modal-open {
            overflow: hidden;
        }

        /* Header Styles */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            background: rgba(245, 244, 237, 0.6);
            padding: 1.5rem;
            z-index: 100;
            transition: var(--transition-default);
        }

        .header__container {
            max-width: 640px;
            margin: 0 auto;
        }

        .header__title {
            font-family: "Festive", cursive;
            font-style: normal;
            font-size: 3rem;
            font-weight: 400;
            margin-bottom: 1rem;
            color: var(--color-text-secondary);
        }

        .search {
            position: relative;
        }

        .search__input {
            width: 100%;
            padding: 0.75rem 1rem;
            background-color: var(--color-bg-secondary);
            border: 2px solid transparent;
            border-radius: 0.5rem;
            color: var(--color-text-secondary);
            font-size: 1rem;
            transition: var(--transition-default);
        }

        .search__input::placeholder {
            color: var(--color-text-placeholder);
        }

        .search__input:focus {
            outline: none;
            border-color: var(--color-border);
            background-color: var(--color-bg-hover);
        }

        /* Main Content */
        .main {
            padding: 12rem 1.5rem 2rem;
            max-width: 640px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        /* Category Card */
        .category-card {
            position: relative;
            background-color: var(--color-bg-secondary);
            border-radius: 0.5rem;
            padding: 1rem 0.75rem;
            cursor: pointer;
            transition: var(--transition-default);
            border: 2px solid transparent;
            overflow: hidden;
        }

        .category-card:hover {
            background-color: var(--color-bg-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .category-card.hidden {
            display: none;
        }

        .category-card__content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            pointer-events: none;
        }

        .category-card__icon {
            width: 64px;
            height: 64px;
            object-fit: contain;
            transition: var(--transition-default);
        }

        .category-card__name {
            font-size: 0.875rem;
            font-weight: 500;
            text-align: center;
            color: var(--color-text-secondary);
        }

        .category-card__actions {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2px;
            background-color: var(--color-bg-secondary);
            border-radius: 0.5rem;
            padding: 0.5rem;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-default);
        }

        .category-card:hover .category-card__actions {
            opacity: 1;
            visibility: visible;
        }

        .category-card:hover .category-card__content {
            opacity: 0;
        }

        .action-btn {
            flex: 1;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--color-bg-secondary);
            border: none;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: var(--transition-default);
        }

        .action-btn:hover {
            background-color: var(--color-bg-hover);
        }

        .action-btn svg {
            width: 32px;
            height: 32px;
            fill: var(--color-text-secondary);
            transition: var(--transition-default);
        }

        .action-btn:hover svg {
            fill: #0d1117;
            transform: scale(1.1);
        }

        /* Dropdown styles */
        .service__item--expandable {
            cursor: pointer;
            user-select: none;
        }
        
        
        .service__dropdown {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            margin-left: 1.5rem;
        }
        
        .service__dropdown.expanded {
            max-height: 500px; /* Достаточно большое значение */
        }
        
        .service__dropdown-item {
            padding: 0.5rem 0.75rem;
            margin-top: 0.25rem;
            background-color: var(--color-bg-primary);
            border-radius: 0.375rem;
            transition: var(--transition-default);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .service__dropdown-item:hover {
            background-color: var(--color-bg-hover);
            transform: translateX(4px);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            z-index: 110;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            max-height: 80vh;
            border-radius: 0.5rem 0.5rem 0 0;
            box-shadow: var(--shadow-modal);
            transform: translateY(100%);
            transition: var(--transition-modal);
            z-index: 120;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        
        /* Основной контент (передний слой с прозрачностью) */
        .modal__container {
            position: relative;
            z-index: 3;
            flex: 1;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            background: rgba(231, 229, 219, 1);
            border-radius: 0.5rem 0.5rem 0 0;
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0);
        }
        
        .modal__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid rgba(107, 114, 128, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        
        .modal__title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--color-text-secondary);
        }
        
        .modal__close {
            width: 2.25rem;
            height: 2.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--color-bg-secondary);
            border: 2px solid transparent;
            border-radius: 0.5rem;
            color: var(--color-border);
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition-default);
        }
        
        .modal__close:hover {
            background-color: var(--color-bg-hover);
            border-color: var(--color-border);
        }
        
        .modal__content {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            color: var(--color-text-secondary);
            max-height: calc(80vh - 80px);
        }
        
        .modal__content::-webkit-scrollbar {
            width: 6px;
        }
        
        .modal__content::-webkit-scrollbar-track {
            background: var(--color-bg-secondary);
        }
        
        .modal__content::-webkit-scrollbar-thumb {
            background: var(--color-border);
            border-radius: 3px;
        }

        .service {
            margin-bottom: 1.5rem;
        }

        .service__title {
            font-weight: 700;
            padding: 0.75rem;
            color: var(--color-text-secondary);
        }

        .service__item {
            padding: 0;
            margin-top: 0.25rem;
            background-color: var(--color-bg-hover);
            border-radius: 0.5rem;
            transition: var(--transition-default);
            display: flex;
            align-items: center;
            justify-content: space-between;
            overflow: hidden;
        }
        
        .service__item:hover {
            background-color: white;
            transform: translateX(4px);
        }
        
        .service__item-text {
            flex: 1;
            padding: 0.75rem;
        }
        
        .service__item-icon {
            padding: 0.75rem 0.75rem 0.75rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: auto;
        }

        /* Loading State */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            color: var(--color-text-placeholder);
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-left: 0.5rem;
            border: 2px solid var(--color-border);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Error State */
        .error {
            padding: 2rem;
            text-align: center;
            color: #dc2626;
        }

        /* Desktop Styles */
        @media (min-width: 1024px) {
            .header__container,
            .main {
                max-width: 640px;
                margin: 0 auto;
            }
        
            .modal {
                bottom: auto;
                top: 50%;
                left: 50%;
                right: auto;
                width: 640px;
                max-width: calc(100vw - 2rem);
                transform: translate(-50%, -50%) translateY(100%);
                border-radius: 0.5rem; /* Добавляем скругление со всех сторон для десктопа */
                overflow: hidden;
            }
        
            .modal__container {
                border-radius: 0.5rem; /* Скругление контейнера для десктопа */
            }
        
            .modal-overlay.active .modal {
                transform: translate(-50%, -50%) translateY(0);
            }
        }

        /* No Results Message */
        .no-results {
            grid-column: 1 / -1;
            padding: 2rem;
            text-align: center;
            color: var(--color-text-placeholder);
        }
    </style>
</head>
<body>
    <!-- SVG Icons -->
    <svg style="display: none;">
        <defs>
            <symbol id="icon-windows" viewBox="0 0 1920 1920">
                <path d="M1863.53 1016.437c31.171 0 56.47 25.299 56.47 56.47v790.589c0 16.376-7.115 31.849-19.313 42.465-10.39 9.149-23.605 14.005-37.158 14.005-2.484 0-5.082-.113-7.567-.452l-903.53-123.331c-28.008-3.84-48.903-27.784-48.903-56.02v-667.256c0-31.171 25.3-56.47 56.471-56.47Zm-1129.412 0c31.171 0 56.47 25.299 56.47 56.47v634.504c0 16.376-7.115 31.85-19.426 42.579-10.39 9.035-23.491 13.891-37.044 13.891-2.485 0-5.196-.113-7.68-.564L48.79 1669.35C20.78 1665.51 0 1641.68 0 1613.444v-540.537c0-31.171 25.299-56.47 56.47-56.47Zm-7.726-859.855c16.151-2.372 32.415 2.597 44.725 13.327 12.424 10.73 19.426 26.315 19.426 42.579V846.99c0 31.285-25.186 56.47-56.47 56.47H56.424c-31.171 0-56.47-25.185-56.47-56.47V306.455c0-28.123 20.781-52.066 48.79-55.906ZM1855.974.474c16.15-2.033 32.414 2.71 44.724 13.44 12.198 10.73 19.313 26.203 19.313 42.466v790.588c0 31.285-25.299 56.471-56.47 56.471H960.01c-31.171 0-56.47-25.186-56.47-56.47V179.711c0-28.235 20.78-52.066 48.903-55.906Z" fill-rule="evenodd"/>
            </symbol>
            <symbol id="icon-apple" viewBox="0 0 1920 1920">
                <path d="M972.669 550.592c74.37 0 213.815-103.393 360.63-88.315 61.446 2.608 233.881 25.282 344.644 190.462-8.843 5.895-205.88 122.78-203.5 366.184 2.495 290.908 249.982 387.499 252.816 388.973-2.268 6.575-39.566 137.857-130.489 273.448-78.565 117.111-159.965 233.655-288.3 236.036-126.18 2.494-166.767-76.298-311.087-76.298-144.206 0-189.214 73.917-308.706 78.792-123.913 4.762-218.237-126.52-297.37-243.178-161.892-238.87-285.578-674.665-119.491-968.86 82.42-146.133 229.8-238.643 389.879-241.024 121.646-2.267 236.603 83.78 310.974 83.78ZM1367.75 0c13.038 110.536-34.69 221.525-105.093 301.45-70.743 79.813-186.494 141.94-299.977 133.55-15.305-108.495 41.947-221.184 107.248-292.154C1142.939 63.034 1266.172 3.855 1367.75 0Z" fill-rule="evenodd"/>
            </symbol>
            <symbol fill="none" viewBox="0 0 24 24" id="dhig--icons--actions--download" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 3V16M12 16L16 11.625M12 16L8 11.625" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M15 21H9C6.17157 21 4.75736 21 3.87868 20.1213C3 19.2426 3 17.8284 3 15M21 15C21 17.8284 21 19.2426 20.1213 20.1213C19.8215 20.4211 19.4594 20.6186 19 20.7487" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </symbol>
            <symbol fill="none" viewBox="0 0 24 24" id="dhig--icons--actions--video" xmlns="http://www.w3.org/2000/svg">
                <!-- Твой SVG для видео: убери внешний <svg>, оставь path -->
                <path d="M2.5 7.25C2.08579 7.25 1.75 7.58579 1.75 8C1.75 8.41421 2.08579 8.75 2.5 8.75V7.25ZM22 7.25H2.5V8.75H22V7.25Z" fill="#1C274C"/>
                <path d="M10.5 2.5L7 8" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M17 2.5L13.5 8" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M15 14.5C15 13.8666 14.338 13.4395 13.014 12.5852C11.6719 11.7193 11.0008 11.2863 10.5004 11.6042C10 11.9221 10 12.7814 10 14.5C10 16.2186 10 17.0779 10.5004 17.3958C11.0008 17.7137 11.6719 17.2807 13.014 16.4148C14.338 15.5605 15 15.1334 15 14.5Z" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
            </symbol>
            
            <symbol fill="none" viewBox="0 0 24 24" id="dhig--icons--actions--pc-help" xmlns="http://www.w3.org/2000/svg">
                <!-- Твой SVG для пк помощь: убери внешний <svg>, оставь path -->
                <path d="M13.0867 21.3877L13.7321 21.7697L13.0867 21.3877ZM13.6288 20.4718L12.9833 20.0898L13.6288 20.4718ZM10.3712 20.4718L9.72579 20.8539H9.72579L10.3712 20.4718ZM10.9133 21.3877L11.5587 21.0057L10.9133 21.3877ZM1.25 10.5C1.25 10.9142 1.58579 11.25 2 11.25C2.41421 11.25 2.75 10.9142 2.75 10.5H1.25ZM3.07351 15.6264C2.915 15.2437 2.47627 15.062 2.09359 15.2205C1.71091 15.379 1.52918 15.8177 1.68769 16.2004L3.07351 15.6264ZM7.78958 18.9915L7.77666 19.7413L7.78958 18.9915ZM5.08658 18.6194L4.79957 19.3123H4.79957L5.08658 18.6194ZM21.6194 15.9134L22.3123 16.2004V16.2004L21.6194 15.9134ZM16.2104 18.9915L16.1975 18.2416L16.2104 18.9915ZM18.9134 18.6194L19.2004 19.3123H19.2004L18.9134 18.6194ZM19.6125 2.7368L19.2206 3.37628L19.6125 2.7368ZM21.2632 4.38751L21.9027 3.99563V3.99563L21.2632 4.38751ZM4.38751 2.7368L3.99563 2.09732V2.09732L4.38751 2.7368ZM2.7368 4.38751L2.09732 3.99563H2.09732L2.7368 4.38751ZM9.40279 19.2098L9.77986 18.5615L9.77986 18.5615L9.40279 19.2098ZM13.7321 21.7697L14.2742 20.8539L12.9833 20.0898L12.4412 21.0057L13.7321 21.7697ZM9.72579 20.8539L10.2679 21.7697L11.5587 21.0057L11.0166 20.0898L9.72579 20.8539ZM12.4412 21.0057C12.2485 21.3313 11.7515 21.3313 11.5587 21.0057L10.2679 21.7697C11.0415 23.0767 12.9585 23.0767 13.7321 21.7697L12.4412 21.0057ZM10.5 2.75H13.5V1.25H10.5V2.75ZM21.25 10.5V11.5H22.75V10.5H21.25ZM7.8025 18.2416C6.54706 18.2199 5.88923 18.1401 5.37359 17.9265L4.79957 19.3123C5.60454 19.6457 6.52138 19.7197 7.77666 19.7413L7.8025 18.2416ZM1.68769 16.2004C2.27128 17.6093 3.39066 18.7287 4.79957 19.3123L5.3736 17.9265C4.33223 17.4951 3.50486 16.6678 3.07351 15.6264L1.68769 16.2004ZM21.25 11.5C21.25 12.6751 21.2496 13.5189 21.2042 14.1847C21.1592 14.8438 21.0726 15.2736 20.9265 15.6264L22.3123 16.2004C22.5468 15.6344 22.6505 15.0223 22.7007 14.2868C22.7504 13.5581 22.75 12.6546 22.75 11.5H21.25ZM16.2233 19.7413C17.4786 19.7197 18.3955 19.6457 19.2004 19.3123L18.6264 17.9265C18.1108 18.1401 17.4529 18.2199 16.1975 18.2416L16.2233 19.7413ZM20.9265 15.6264C20.4951 16.6678 19.6678 17.4951 18.6264 17.9265L19.2004 19.3123C20.6093 18.7287 21.7287 17.6093 22.3123 16.2004L20.9265 15.6264ZM13.5 2.75C15.1512 2.75 16.337 2.75079 17.2619 2.83873C18.1757 2.92561 18.7571 3.09223 19.2206 3.37628L20.0044 2.09732C19.2655 1.64457 18.4274 1.44279 17.4039 1.34547C16.3915 1.24921 15.1222 1.25 13.5 1.25V2.75ZM22.75 10.5C22.75 8.87781 22.7508 7.6085 22.6545 6.59611C22.5572 5.57256 22.3554 4.73445 21.9027 3.99563L20.6237 4.77938C20.9078 5.24291 21.0744 5.82434 21.1613 6.73809C21.2492 7.663 21.25 8.84876 21.25 10.5H22.75ZM19.2206 3.37628C19.7925 3.72672 20.2733 4.20752 20.6237 4.77938L21.9027 3.99563C21.4286 3.22194 20.7781 2.57144 20.0044 2.09732L19.2206 3.37628ZM10.5 1.25C8.87781 1.25 7.6085 1.24921 6.59611 1.34547C5.57256 1.44279 4.73445 1.64457 3.99563 2.09732L4.77938 3.37628C5.24291 3.09223 5.82434 2.92561 6.73809 2.83873C7.663 2.75079 8.84876 2.75 10.5 2.75V1.25ZM2.75 10.5C2.75 8.84876 2.75079 7.663 2.83873 6.73809C2.92561 5.82434 3.09223 5.24291 3.37628 4.77938L2.09732 3.99563C1.64457 4.73445 1.44279 5.57256 1.34547 6.59611C1.24921 7.6085 1.25 8.87781 1.25 10.5H2.75ZM3.99563 2.09732C3.22194 2.57144 2.57144 3.22194 2.09732 3.99563L3.37628 4.77938C3.72672 4.20752 4.20752 3.72672 4.77938 3.37628L3.99563 2.09732ZM11.0166 20.0898C10.8136 19.7468 10.6354 19.4441 10.4621 19.2063C10.2795 18.9559 10.0702 18.7304 9.77986 18.5615L9.02572 19.8582C9.07313 19.8857 9.13772 19.936 9.24985 20.0898C9.37122 20.2564 9.50835 20.4865 9.72579 20.8539L11.0166 20.0898ZM7.77666 19.7413C8.21575 19.7489 8.49387 19.7545 8.70588 19.7779C8.90399 19.7999 8.98078 19.832 9.02572 19.8582L9.77986 18.5615C9.4871 18.3912 9.18246 18.3215 8.87097 18.287C8.57339 18.2541 8.21375 18.2487 7.8025 18.2416L7.77666 19.7413ZM14.2742 20.8539C14.4916 20.4865 14.6287 20.2564 14.7501 20.0898C14.8622 19.936 14.9268 19.8857 14.9742 19.8582L14.2201 18.5615C13.9298 18.7304 13.7204 18.9559 13.5379 19.2063C13.3646 19.4441 13.1864 19.7468 12.9833 20.0898L14.2742 20.8539ZM16.1975 18.2416C15.7862 18.2487 15.4266 18.2541 15.129 18.287C14.8175 18.3215 14.5129 18.3912 14.2201 18.5615L14.9742 19.8582C15.0192 19.832 15.096 19.7999 15.2941 19.7779C15.5061 19.7545 15.7842 19.7489 16.2233 19.7413L16.1975 18.2416Z" fill="#1C274C"/>
                <path d="M8 11H8.009M11.991 11H12M15.991 11H16" stroke="#1C274C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </symbol>
            
            <symbol fill="none" viewBox="0 0 24 24" id="dhig--icons--actions--addons" xmlns="http://www.w3.org/2000/svg">
                <!-- Твой SVG для дополнения -->
                <path d="M22 12C22 12 21.0071 12.8907 19.0212 13.6851L16.2127 14.8085C14.2268 15.6028 13.2339 16 12 16C10.7661 16 9.77318 15.6028 7.7873 14.8085L4.97883 13.6851C2.99294 12.8907 2 12 2 12" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M2 16C2 16 2.99294 16.8907 4.97883 17.6851L7.7873 18.8085C9.77318 19.6028 10.7661 20 12 20C12.9539 20 13.7639 19.7626 15 19.2878M19.0212 17.6851C21.0071 16.8907 22 16 22 16" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M4.97883 6.31492C2.99294 7.10927 2 7.50645 2 8C2 8.49355 2.99294 8.89073 4.97883 9.68508L7.7873 10.8085C9.77318 11.6028 10.7661 12 12 12C13.2339 12 14.2268 11.6028 16.2127 10.8085L19.0212 9.68508C21.0071 8.89073 22 8.49355 22 8C22 7.50645 21.0071 7.10927 19.0212 6.31492L16.2127 5.19153C14.2268 4.39718 13.2339 4 12 4C11.0461 4 10.2361 4.2374 9 4.71221" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
            </symbol>
        </defs>
    </svg>

    <!-- Header -->
    <header class="header">
        <div class="header__container">
            <h1 class="header__title">Stylish Antelope</h1>
            <div class="search">
                <input 
                    type="text" 
                    class="search__input" 
                    placeholder="Поиск..."
                    id="searchInput"
                    autocomplete="off"
                >
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="categories" id="categoriesContainer">
            <!-- Categories will be rendered here -->
        </div>
    </main>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal__container">
                <div class="modal__header">
                    <h2 class="modal__title" id="modalTitle"></h2>
                    <button class="modal__close" id="modalClose">×</button>
                </div>
                <div class="modal__content" id="modalContent"></div>
            </div>
        </div>
    </div>

    <script>
        'use strict';


        // App State Management
        const AppState = {
            categories: [],
            filteredCategories: [],
            clicks: {},
            isModalOpen: false,
            currentCategory: null,
            currentPlatform: null
        };

        // Constants
        const STORAGE_KEY = 'categoryClicks';
        const PLATFORMS = {
            WIN: { name: 'Win', icon: 'icon-windows' },
            MAC: { name: 'Mac', icon: 'icon-apple' }
        };

        const BUTTON_ICONS = {
            "0": null,  // Пусто
            "1": "download",
            "2": "video",
            "3": "addons",
            "4": "pc-help"
            // Добавь новые: "5": "new-icon",
        };

        // DOM Elements
        const DOM = {
            searchInput: document.getElementById('searchInput'),
            categoriesContainer: document.getElementById('categoriesContainer'),
            modalOverlay: document.getElementById('modalOverlay'),
            modal: document.getElementById('modal'),
            modalTitle: document.getElementById('modalTitle'),
            modalContent: document.getElementById('modalContent'),
            modalClose: document.getElementById('modalClose')
        };

        // Storage Service
        const StorageService = {
            getClicks() {
                try {
                    return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
                } catch (e) {
                    console.error('Error reading from localStorage:', e);
                    return {};
                }
            },

            saveClicks(clicks) {
                try {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(clicks));
                } catch (e) {
                    console.error('Error saving to localStorage:', e);
                }
            },

            incrementClicks(category) {
                const clicks = this.getClicks();
                clicks[category] = (clicks[category] || 0) + 1;
                this.saveClicks(clicks);
                AppState.clicks = clicks;
            }
        };

        // API Service
        const ApiService = {
            async fetchCategories() {
                try {
                    const response = await fetch('./categories.json');
                    if (!response.ok) throw new Error('Failed to fetch categories');
                    return await response.json();
                } catch (error) {
                    console.error('Error fetching categories:', error);
                    return [];
                }
            },

            async fetchServices(category, platform) {
                try {
                    const url = `./${category}/${platform}.json`;
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`Failed to fetch services from ${url}`);
                    return await response.json();
                } catch (error) {
                    console.error('Error fetching services:', error);
                    return null;
                }
            }
        };

        // Modal Controller
        const ModalController = {
            open(title) {
                AppState.isModalOpen = true;
                DOM.modalTitle.textContent = title;
                DOM.modalOverlay.classList.add('active');
                document.body.classList.add('modal-open');
            },

            close() {
                AppState.isModalOpen = false;
                DOM.modalOverlay.classList.remove('active');
                document.body.classList.remove('modal-open');
                DOM.modalContent.scrollTop = 0;
                
                // Clear content after animation
                setTimeout(() => {
                    DOM.modalContent.innerHTML = '';
                    DOM.modalTitle.textContent = '';
                }, 600);
            },

            setContent(html) {
                DOM.modalContent.innerHTML = html;
            },

            showLoading() {
                this.setContent('<div class="loading">Загрузка данных</div>');
            },

            showError(message = 'Произошла ошибка при загрузке данных') {
                this.setContent(`<div class="error">${message}</div>`);
            }
        };

        // UI Renderer
        const UIRenderer = {
            createCategoryCard(category) {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.dataset.category = category;
                
                card.innerHTML = `
                    <div class="category-card__content">
                        <img 
                            src="./${category}/1.png" 
                            alt="${category}" 
                            class="category-card__icon"
                            onerror="this.style.display='none'"
                        >
                        <span class="category-card__name">${category}</span>
                    </div>
                    <div class="category-card__actions">
                        <button class="action-btn" data-platform="WIN" aria-label="Windows">
                            <svg><use href="#icon-windows"/></svg>
                        </button>
                        <button class="action-btn" data-platform="MAC" aria-label="Mac">
                            <svg><use href="#icon-apple"/></svg>
                        </button>
                    </div>
                `;

                // Add event listeners
                const actionButtons = card.querySelectorAll('.action-btn');
                actionButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.handleCategoryClick(category, btn.dataset.platform);
                    });
                });

                return card;
            },

            async handleCategoryClick(category, platform) {
                const platformName = PLATFORMS[platform].name;
                
                // Track click
                StorageService.incrementClicks(category);
                
                // Open modal
                ModalController.open(`${category} (${platformName})`);
                ModalController.showLoading();
                
                // Fetch and display services
                const data = await ApiService.fetchServices(category, platformName);
                
                if (data && data.services) {
                    const html = data.services.map((service, serviceIndex) => `
                        <div class="service">
                            <div class="service__title">${service.name}</div>
                            ${service.subServices.map((sub, subIndex) => {
                                // Уникальный ID для dropdown, включающий serviceIndex
                                const dropdownId = `dropdown-${serviceIndex}-${subIndex}`;
                                // Если есть вложенные элементы
                                if (sub.subItems && sub.subItems.length > 0) {
                                    return `
                                        <div>
                                            <div class="service__item service__item--expandable" data-dropdown-id="${dropdownId}">
                                                <div class="service__item-text">${sub.name}</div>
                                                ${BUTTON_ICONS[sub.but] ? `<div class="service__item-icon"><svg style="width: 16px; height: 16px;"><use href="#dhig--icons--actions--${BUTTON_ICONS[sub.but]}"/></svg></div>` : ''}
                                            </div>
                                            <div class="service__dropdown" id="${dropdownId}">
                                                ${sub.subItems.map(item => `
                                                    <div class="service__dropdown-item" ${item.web && item.web !== "0" ? `onclick="window.open('${item.web}', '_blank')"` : ''}>
                                                        <span>${item.name}</span>
                                                        ${BUTTON_ICONS[item.but] ? `<svg style="width: 16px; height: 16px;"><use href="#dhig--icons--actions--${BUTTON_ICONS[item.but]}"/></svg>` : ''}
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    `;
                                } 
                                // Обычный элемент без вложенности
                                else {
                                    return `
                                        <div class="service__item" ${sub.web && sub.web !== "0" ? `onclick="window.open('${sub.web}', '_blank')"` : ''} ${sub.web && sub.web !== "0" ? 'style="cursor: pointer;"' : ''}>
                                            <div class="service__item-text">${sub.name}</div>
                                            ${BUTTON_ICONS[sub.but] ? `<div class="service__item-icon"><svg style="width: 16px; height: 16px;"><use href="#dhig--icons--actions--${BUTTON_ICONS[sub.but]}"/></svg></div>` : ''}
                                        </div>
                                    `;
                                }
                            }).join('')}
                        </div>
                    `).join('');
            
                    // Установить контент один раз
                    ModalController.setContent(html);
            
                    // Добавить обработчики для выпадающих списков
                    document.querySelectorAll('.service__item--expandable').forEach(item => {
                        item.addEventListener('click', function(e) {
                            e.stopPropagation(); // Предотвратить всплытие события
                            const dropdownId = this.dataset.dropdownId;
                            const dropdown = document.getElementById(dropdownId);
                            
                            this.classList.toggle('expanded');
                            dropdown.classList.toggle('expanded');
                        });
                    });
                } else {
                    ModalController.showError();
                }
                
                // Re-render categories to update order
                this.renderCategories();
            }

            renderCategories() {
                const container = DOM.categoriesContainer;
                container.innerHTML = '';
                
                if (AppState.filteredCategories.length === 0) {
                    container.innerHTML = '<div class="no-results">Ничего не найдено</div>';
                    return;
                }
                
                AppState.filteredCategories.forEach(category => {
                    container.appendChild(this.createCategoryCard(category));
                });
            },

            sortCategories(categories) {
                return [...categories].sort((a, b) => {
                    const clicksA = AppState.clicks[a] || 0;
                    const clicksB = AppState.clicks[b] || 0;
                    
                    if (clicksB !== clicksA) {
                        return clicksB - clicksA;
                    }
                    
                    return a.localeCompare(b, 'ru');
                });
            }
        };

        // Search Controller
        const SearchController = {
            init() {
                DOM.searchInput.addEventListener('input', this.debounce(this.handleSearch, 300));
            },

            handleSearch(e) {
                const searchTerm = e.target.value.toLowerCase().trim();
                
                if (searchTerm === '') {
                    AppState.filteredCategories = AppState.categories;
                } else {
                    AppState.filteredCategories = AppState.categories.filter(category => 
                        category.toLowerCase().includes(searchTerm)
                    );
                }
                
                UIRenderer.renderCategories();
            },

            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
        };

        // App Initialization
        const App = {
            async init() {
                try {
                    // Load clicks from storage
                    AppState.clicks = StorageService.getClicks();
                    
                    // Fetch categories
                    const categories = await ApiService.fetchCategories();
                    AppState.categories = UIRenderer.sortCategories(categories);
                    AppState.filteredCategories = AppState.categories;
                    
                    // Render UI
                    UIRenderer.renderCategories();
                    
                    // Initialize controllers
                    SearchController.init();
                    this.initModalEvents();
                    
                } catch (error) {
                    console.error('Error initializing app:', error);
                    DOM.categoriesContainer.innerHTML = '<div class="error">Ошибка загрузки приложения</div>';
                }
            },

            initModalEvents() {
                // Close modal events
                DOM.modalClose.addEventListener('click', () => ModalController.close());
                
                DOM.modalOverlay.addEventListener('click', (e) => {
                    if (e.target === DOM.modalOverlay) {
                        ModalController.close();
                    }
                });
                
                // ESC key to close modal
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && AppState.isModalOpen) {
                        ModalController.close();
                    }
                });
            }
        };

        // Start the app when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => App.init());
        } else {
            App.init();
        }
    </script>
</body>
</html>
